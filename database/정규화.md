## 정규화(Normalization)

- 정규화의 기본 목표는 **테이블 간의 중복 데이터를 허용하지 않는 것이다.** 중복된 데이터를 허용하지 않음으로써 **무결성을 유지할 수 있으며, DB 의 저장 용량 역시 줄일 수 있다.**

### 제 1 정규화

- **테이블의 컬럼이 원자값(Atomic Value, 하나의 값)을 갖도록 테이블을 분해**하는 것이다.

| 이름  | 취미들    |
|:----|:-------|
| 김연아 | 인터넷    |
| 추신수 | 영화, 음악 |
| 박세리 | 음악, 쇼핑 |
| 장미란 | 축구     |
- 위의 테이블에서 추신수와 박세리는 여러 개의 취미를 가지고 있기 때문에 제1정규형을 만족하지 못하고 있다. 그렇기 때문에 이를 제1정규화하여 분해할 수 있다.

| 이름  | 취미  |
|:----|:----|
| 김연아 | 인터넷 |
| 추신수 | 영화  |
| 추신수 | 음악  |
| 박세리 | 음악  |
| 박세리 | 쇼핑  |
| 장미란 | 축구  |

<br>

### 제 2 정규화

- **제1정규화를 진행한 테이블에 대해 완전 함수 종속을 만족하도록 테이블을 분해**하는 것이다. 완전 함수 종속이라는 것은 **기본키중에 특정 걸럼에만 종속된 컬럼(부분적 종속)이 없어야 한다**는 것이다.

| 학생번호 | 강좌이름   | 강의실     | 성적  |
|:-----|:-------|:--------|:----|
| 501  | 데이터베이스 | 공학관 110 | 3.5 |
| 401  | 데이터베이스 | 공학관 110 | 4.5 |
| 402  | 스표츠경영학 | 체육관 103 | 4.0 |
- 위의 테이블에서 기본키는 학생번호+강좌이름인데 기본키의 부분키인 강좌이름에 의해 강의실이 결정될 수 있다. 그래서 이부분을 2개의 테이블로 분리하여 제2정규화를 만족시킬 수 있다.

| 학생번호 | 강좌이름   | 성적  |
|:-----|:-------|:----|
| 501  | 데이터베이스 | 3.5 |
| 401  | 데이터베이스 | 4.5 |
| 402  | 스표츠경영학 | 4.0 |

| 강좌이름   | 강의실     |
|:-------|:--------|
| 데이터베이스 | 공학관 110 |
| 402    | 스표츠경영학  | 체육관 103 |

### 제 3 정규화

- **제2정규화를 진행한 테이블에 대해 이행적 종속을 없애도록 테이블을 분해하는 것이다.** 이행적 종속이라는 것은 A -> B, B-> C 가 성립할 때 A -> C 가 성립하는 것을 의미한다.

| 학생번호 | 강좌이름   | 수강료   |
|:-----|:-------|:------|
| 501  | 데이터베이스 | 20000 |
| 401  | 데이터베이스 | 20000 |
| 402  | 스표츠경영학 | 15000 |

- 위의 테이블에서 학생 번호는 강좌 이름을 결정하고 있고, 강좌 이름은 수강료를 결정하고 있다. 이행적 종속이 발생한 것이다. 이를 제거해야 하는 이유는 다음과 같다.
예를 들어 501번 학생이 수강하는 강좌가 스포츠경영학으로 변경되었다고 하면 강좌는 변경되었지만 여전히 수강료는 동일하게 된다. 물론 강좌 이름에 맞게 수강료를 다시 변경할 수 있지만..
이러한 번거로움을 해결하기 위해 제3정규화를 한다.

| 학생번호 | 강좌이름   |
|:-----|:-------|
| 501  | 데이터베이스 |
| 401  | 데이터베이스 |
| 402  | 스표츠경영학 |

| 강좌이름   | 수강료   |
|:-------|:------|
| 데이터베이스 | 20000 |
| 스표츠경영학 | 15000 |

<br>

### BCNF(Boyce and Codd Normal Form) 정규화

- **제3정규화를 진행한 테이블에 대해 모든 결정자가 후보키가 되도록 테이블을 분해하는 것이다.**

| 학생번호 | 특강이름   | 교수  |
|:-----|:-------|:----|
| 501  | 소셜네트워크 | 김교수 |
| 401  | 소셜네트워크 | 김교수 |
| 402  | 인간과 동물 | 박교수 |
- 위의 테이블에서 기본키는 학생번호+특강이름이고, 기본키는 교수를 결정하고 있다. 또한 여기서 교수는 특강이름을 결정하고 있다.
문제는 교수가 특강이름을 결정하는 결정자이지만, 후보키가 아니라는 점이다. 그래서 BCNF 정규화를 만족시키기 위해서 위의 테이블을 분해해야 한다. 

| 학생번호 | 교수  |
|:-----|:----|
| 501  | 김교수 |
| 401  | 김교수 |
| 402  | 박교수 |

| 특강이름   | 교수  |
|:-------|:----|
| 소셜네트워크 | 김교수 |
| 인간과 동물 | 박교수 |

### 참고

- [https://mangkyu.tistory.com/110](https://mangkyu.tistory.com/110)